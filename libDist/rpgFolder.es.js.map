{"version":3,"file":"rpgFolder.es.js","sources":["../src/libs/folder/data/detail/detail.ts","../src/libs/folder/data/actor.ts","../src/libs/folder/data/armor.ts","../src/libs/folder/data/class.ts","../src/libs/folder/data/enemy.ts","../src/libs/folder/data/item.ts","../src/libs/folder/data/skill.ts","../src/libs/folder/data/state.ts","../src/libs/folder/data/weapon.ts","../src/libs/folder/data/troop.ts","../src/libs/folder/data/commonEvent.ts","../src/libs/folder/data/mapInfo.ts","../src/libs/folder/data/map.ts","../src/libs/folder/dataDispatch.ts","../src/libs/folder/multiWrite.ts","../src/libs/folder/asset/ensure/ensure.ts","../src/libs/folder/asset/audioPath.ts","../src/libs/folder/asset/imagePath.ts","../src/libs/folder/asset/constants/audios.ts","../src/libs/folder/asset/constants/images.ts","../src/libs/folder/asset/makeFolder.ts","../src/libs/folder/asset/validate.ts","../src/libs/folder/asset/listup.ts"],"sourcesContent":["import { FOLDER_DATA, type IdentifiedItems } from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_WriteFile,\r\n  FsLib_ReadFile,\r\n  PathLib_Resolve,\r\n} from \"./libTypes\";\r\n\r\nexport const normalizeIdentifiedItems = <T>(items: IdentifiedItems<T>): T[] => {\r\n  return items.filter((item): item is T => item !== null);\r\n};\r\n\r\nexport const denormalizeIdentifiedItems = <T>(\r\n  items: T[]\r\n): IdentifiedItems<T> => {\r\n  return [null, ...items];\r\n};\r\n\r\nexport const ensureDataFolderPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, \"\");\r\n};\r\n\r\nexport const ensureDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  fileName: string\r\n): string => {\r\n  return basePath.endsWith(`${pathLib.sep}${FOLDER_DATA}`)\r\n    ? pathLib.resolve(basePath, fileName)\r\n    : pathLib.resolve(basePath, FOLDER_DATA, fileName);\r\n};\r\n\r\nexport const validateAndFilterItems = <T>(\r\n  list: unknown,\r\n  fn: (data: unknown) => data is T\r\n): T[] => {\r\n  if (Array.isArray(list)) {\r\n    return list.filter((item) => fn(item));\r\n  }\r\n  throw new Error(\"Invalid data format\");\r\n};\r\n\r\nexport const writeDataFile = async <T>(\r\n  fsLib: FsLib_WriteFile,\r\n  path: string,\r\n  data: T[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const list: [null, ...T[]] = denormalizeIdentifiedItems(data);\r\n  return fsLib.writeFile(path, JSON.stringify(list, null, space), \"utf-8\");\r\n};\r\n\r\nexport const readDataFile = async <T>(\r\n  fsLib: FsLib_ReadFile,\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  fileName: string,\r\n  validateFn: (data: unknown) => data is T\r\n): Promise<T[]> => {\r\n  const path: string = ensureDataPath(pathLib, basePath, fileName);\r\n  return readRmmzDataListFile(fsLib, path, validateFn);\r\n};\r\n\r\nexport const readRmmzDataListFile = async <T>(\r\n  fsLib: FsLib_ReadFile,\r\n  resolvedPath: string,\r\n  validateFn: (data: unknown) => data is T\r\n): Promise<T[]> => {\r\n  const jsonText: string = await fsLib.readFile(resolvedPath, \"utf-8\");\r\n  const obj = JSON.parse(jsonText);\r\n  return validateAndFilterItems(obj, validateFn);\r\n};\r\n","import {\r\n  FILENAME_ACTORS,\r\n  isDataActor,\r\n  type Data_Actor,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureActorDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_ACTORS);\r\n};\r\n\r\nexport const writeRmmzActorData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  actors: Data_Actor[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureActorDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, actors, space);\r\n};\r\n\r\nexport const readRmmzActorData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Actor[]> => {\r\n  const path: string = ensureActorDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Actor>(fsLib, path, isDataActor);\r\n};\r\n","import {\r\n  FILENAME_ARMORS,\r\n  isDataArmor,\r\n  type Data_Armor,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureArmorDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_ARMORS);\r\n};\r\n\r\nexport const writeRmmzArmorData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  armors: Data_Armor[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureArmorDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, armors, space);\r\n};\r\n\r\nexport const readRmmzArmorData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Armor[]> => {\r\n  const path: string = ensureArmorDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Armor>(fsLib, path, isDataArmor);\r\n};\r\n","import type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport {\r\n  FILENAME_CLASSES,\r\n  isDataClass,\r\n  type Data_Class,\r\n} from \"@sigureya/rpgtypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureClassDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_CLASSES);\r\n};\r\n\r\nexport const writeRmmzClassData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  armors: Data_Class[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureClassDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, armors, space);\r\n};\r\n\r\nexport const readRmmzClassData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Class[]> => {\r\n  const path: string = ensureClassDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Class>(fsLib, path, isDataClass);\r\n};\r\n","import {\r\n  FILENAME_ENEMIES,\r\n  isDataEnemy,\r\n  type Data_Enemy,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureEnemyDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_ENEMIES);\r\n};\r\n\r\nexport const writeRmmzEnemyData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  enemies: Data_Enemy[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureEnemyDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, enemies, space);\r\n};\r\n\r\nexport const readRmmzEnemyData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Enemy[]> => {\r\n  const path: string = ensureEnemyDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Enemy>(fsLib, path, isDataEnemy);\r\n};\r\n","import { FILENAME_ITEMS, isDataItem, type Data_Item } from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureItemDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_ITEMS);\r\n};\r\n\r\nexport const writeRmmzItemData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  items: Data_Item[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureItemDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, items, space);\r\n};\r\n\r\nexport const readRmmzItemData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Item[]> => {\r\n  const path: string = ensureItemDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Item>(fsLib, path, isDataItem);\r\n};\r\n","import {\r\n  FILENAME_SKILLS,\r\n  isDataSkill,\r\n  type Data_Skill,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureSkillDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_SKILLS);\r\n};\r\n\r\nexport const writeRmmzSkillData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  skills: Data_Skill[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureSkillDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, skills, space);\r\n};\r\n\r\nexport const readRmmzSkillData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Skill[]> => {\r\n  const path: string = ensureSkillDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Skill>(fsLib, path, isDataSkill);\r\n};\r\n","import {\r\n  FILENAME_STATES,\r\n  isDataState,\r\n  type Data_State,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureStateDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_STATES);\r\n};\r\n\r\nexport const writeRmmzStateData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  states: Data_State[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureStateDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, states, space);\r\n};\r\n\r\nexport const readRmmzStateData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_State[]> => {\r\n  const path: string = ensureStateDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_State>(fsLib, path, isDataState);\r\n};\r\n","import {\r\n  FILENAME_WEAPONS,\r\n  isDataWeapon,\r\n  type Data_Weapon,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nexport const ensureWeaponDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_WEAPONS);\r\n};\r\n\r\nexport const writeRmmzWeaponData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  weapons: Data_Weapon[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureWeaponDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, weapons, space);\r\n};\r\n\r\nexport const readRmmzWeaponData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Weapon[]> => {\r\n  const path: string = ensureWeaponDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Weapon>(fsLib, path, isDataWeapon);\r\n};\r\n","import type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nimport { FILENAME_TROOPS, type Data_Troop } from \"@sigureya/rpgtypes\";\r\n\r\nconst isDataTroop = (data: unknown): data is Data_Troop => {\r\n  return (\r\n    typeof data === \"object\" &&\r\n    data !== null &&\r\n    \"id\" in data &&\r\n    typeof (data as Data_Troop).id === \"number\"\r\n  );\r\n};\r\n\r\nexport const ensureTroopDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_TROOPS);\r\n};\r\n\r\nexport const writeRmmzTroopData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  troops: Data_Troop[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureTroopDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, troops, space);\r\n};\r\n\r\nexport const readRmmzTroopData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_Troop[]> => {\r\n  const path: string = ensureTroopDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_Troop>(fsLib, path, isDataTroop);\r\n};\r\n","import {\r\n  FILENAME_COMMON_EVENTS,\r\n  type Data_CommonEvent,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type {\r\n  FsLib_ReadFile,\r\n  FsLib_WriteFile,\r\n  PathLib_Resolve,\r\n} from \"./detail/libTypes\";\r\nimport { ensureDataPath, readRmmzDataListFile, writeDataFile } from \"./detail\";\r\n\r\nconst isCommonEvent = (data: unknown): data is Data_CommonEvent => {\r\n  return !!data && typeof data === \"object\" && \"id\" in data;\r\n};\r\n\r\nexport const ensureCommonEventDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_COMMON_EVENTS);\r\n};\r\n\r\nexport const writeRmmzCommonEventData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  commonEvents: Data_CommonEvent[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureCommonEventDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, commonEvents, space);\r\n};\r\n\r\nexport const readRmmzCommonEventData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_CommonEvent[]> => {\r\n  const path: string = ensureCommonEventDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_CommonEvent>(fsLib, path, isCommonEvent);\r\n};\r\n","import type { Data_MapInfo } from \"@sigureya/rpgtypes\";\r\nimport { FILENAME_MAP_INFOS, isDataMapInfo } from \"@sigureya/rpgtypes\";\r\nimport { ensureDataPath, writeDataFile, readRmmzDataListFile } from \"./detail\";\r\nimport type {\r\n  PathLib_Resolve,\r\n  FsLib_WriteFile,\r\n  FsLib_ReadFile,\r\n} from \"./detail/libTypes\";\r\n\r\nexport const ensureMapInfoDataPath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string\r\n): string => {\r\n  return ensureDataPath(pathLib, basePath, FILENAME_MAP_INFOS);\r\n};\r\n\r\nexport const writeRmmzMapInfoData = (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_WriteFile,\r\n  basePath: string,\r\n  mapInfos: Data_MapInfo[],\r\n  space: number = 2\r\n): Promise<void> => {\r\n  const path: string = ensureMapInfoDataPath(pathLib, basePath);\r\n  return writeDataFile(fsLib, path, mapInfos, space);\r\n};\r\n\r\nexport const readRmmzMapInfoData = async (\r\n  pathLib: PathLib_Resolve,\r\n  fsLib: FsLib_ReadFile,\r\n  basePath: string\r\n): Promise<Data_MapInfo[]> => {\r\n  const path: string = ensureMapInfoDataPath(pathLib, basePath);\r\n  return readRmmzDataListFile<Data_MapInfo>(fsLib, path, isDataMapInfo);\r\n};\r\n","import type { Data_Map, MapFileInfo } from \"@sigureya/rpgtypes\";\r\nimport {\r\n  isDataMapInfo,\r\n  makeMapData,\r\n  type Data_MapInfo,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type { FsLib_ReadFile, PathLib_Resolve } from \"./detail/libTypes\";\r\nimport type FsLib from \"node:fs/promises\";\r\nimport type { Dirent } from \"node:fs\";\r\nimport { readRmmzMapInfoData } from \"./mapInfo\";\r\ntype InfoType = Pick<Data_MapInfo, \"name\" | \"id\">;\r\n\r\nexport const isMapFileName = (filename: string) => {\r\n  return filename.startsWith(\"Map\") && filename.endsWith(\".json\");\r\n};\r\n\r\nexport const listupMapFiles = async (\r\n  fsLib: Pick<typeof FsLib, \"readdir\">,\r\n  resolvedPath: string\r\n): Promise<Dirent[]> => {\r\n  return (await fsLib.readdir(resolvedPath, { withFileTypes: true })).filter(\r\n    (dirent) => dirent.isFile() && isMapFileName(dirent.name)\r\n  );\r\n};\r\n\r\nconst makeMapFileName = (mapId: number) => {\r\n  return `Map${String(mapId).padStart(3, \"0\")}.json` as const;\r\n};\r\n\r\nexport const resolveMapFilePath = (\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  mapId: number\r\n) => {\r\n  const fileName = makeMapFileName(mapId);\r\n  const filePath = pathLib.resolve(basePath, fileName);\r\n  return { filePath, fileName };\r\n};\r\n\r\nexport type ResultOfReadMapFile = MapFileInfo<Data_Map | undefined>;\r\nconst validateAndNormalizeMapData = (data: unknown): Data_Map => {\r\n  // データの不足分を補い、余計なデータを排除する処理\r\n  return makeMapData(data as {});\r\n};\r\n\r\nexport const readMapFileFromInfo = async (\r\n  fsLib: FsLib_ReadFile,\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  info: InfoType\r\n): Promise<ResultOfReadMapFile> => {\r\n  const { filePath, fileName } = resolveMapFilePath(pathLib, basePath, info.id);\r\n\r\n  try {\r\n    const text = await fsLib.readFile(filePath, \"utf-8\");\r\n    const mapData: Data_Map = validateAndNormalizeMapData(JSON.parse(text));\r\n    return {\r\n      filename: fileName,\r\n      map: mapData,\r\n      editingName: info.name,\r\n    };\r\n  } catch {\r\n    return {\r\n      filename: fileName,\r\n      editingName: info.name,\r\n      map: undefined,\r\n    };\r\n  }\r\n};\r\n\r\nexport const mappingAllMapFiles = async <T>(\r\n  fsLib: FsLib_ReadFile,\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  fn: (data: ResultOfReadMapFile) => T,\r\n  infos?: ReadonlyArray<Data_MapInfo | null>\r\n): Promise<Promise<T>[]> => {\r\n  const list = infos ?? (await readRmmzMapInfoData(pathLib, fsLib, basePath));\r\n  return list\r\n    .filter((item) => !!item && isDataMapInfo(item))\r\n    .map(async (info: Data_MapInfo) => {\r\n      const mapFileInfo = await readMapFileFromInfo(\r\n        fsLib,\r\n        pathLib,\r\n        basePath,\r\n        info\r\n      );\r\n      return fn(mapFileInfo);\r\n    });\r\n};\r\n","import type PathLib from \"node:path\";\r\nimport type FsLib from \"node:fs/promises\";\r\nimport type { DataMapper } from \"./data/types\";\r\nimport {\r\n  SRC_DATA_ACTOR,\r\n  SRC_DATA_ARMOR,\r\n  SRC_DATA_CLASS,\r\n  SRC_DATA_COMMON_EVNET,\r\n  SRC_DATA_ENEMY,\r\n  SRC_DATA_ITEMS,\r\n  SRC_DATA_SKILL,\r\n  SRC_DATA_STATE,\r\n  SRC_DATA_TROOP,\r\n  SRC_DATA_WEAPON,\r\n} from \"@sigureya/rpgtypes\";\r\nimport {\r\n  readRmmzActorData,\r\n  readRmmzArmorData,\r\n  readRmmzClassData,\r\n  readRmmzCommonEventData,\r\n  readRmmzEnemyData,\r\n  readRmmzItemData,\r\n  readRmmzSkillData,\r\n  readRmmzStateData,\r\n  readRmmzTroopData,\r\n  readRmmzWeaponData,\r\n} from \"./data\";\r\ntype FsLib_ReadFile = Pick<typeof FsLib, \"readFile\">;\r\ntype PathLib_Resolve = Pick<typeof PathLib, \"resolve\" | \"sep\">;\r\n\r\nexport const dispatchHandlers = async <T>(\r\n  fsLib: FsLib_ReadFile,\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  dataMapper: Partial<DataMapper<T>>\r\n): Promise<Record<keyof DataMapper<T>, T | undefined>> => {\r\n  return {\r\n    actor: dataMapper.actor\r\n      ? dataMapper.actor(\r\n          await readRmmzActorData(pathLib, fsLib, basePath),\r\n          SRC_DATA_ACTOR\r\n        )\r\n      : undefined,\r\n    armor: dataMapper.armor\r\n      ? dataMapper.armor(\r\n          await readRmmzArmorData(pathLib, fsLib, basePath),\r\n          SRC_DATA_ARMOR\r\n        )\r\n      : undefined,\r\n\r\n    enemy: dataMapper.enemy\r\n      ? dataMapper.enemy(\r\n          await readRmmzEnemyData(pathLib, fsLib, basePath),\r\n          SRC_DATA_ENEMY\r\n        )\r\n      : undefined,\r\n    class: dataMapper.class\r\n      ? dataMapper.class(\r\n          await readRmmzClassData(pathLib, fsLib, basePath),\r\n          SRC_DATA_CLASS\r\n        )\r\n      : undefined,\r\n    item: dataMapper.item\r\n      ? dataMapper.item(\r\n          await readRmmzItemData(pathLib, fsLib, basePath),\r\n          SRC_DATA_ITEMS\r\n        )\r\n      : undefined,\r\n\r\n    skill: dataMapper.skill\r\n      ? dataMapper.skill(\r\n          await readRmmzSkillData(pathLib, fsLib, basePath),\r\n          SRC_DATA_SKILL\r\n        )\r\n      : undefined,\r\n\r\n    state: dataMapper.state\r\n      ? dataMapper.state(\r\n          await readRmmzStateData(pathLib, fsLib, basePath),\r\n          SRC_DATA_STATE\r\n        )\r\n      : undefined,\r\n    weapon: dataMapper.weapon\r\n      ? dataMapper.weapon(\r\n          await readRmmzWeaponData(pathLib, fsLib, basePath),\r\n          SRC_DATA_WEAPON\r\n        )\r\n      : undefined,\r\n\r\n    troop: dataMapper.troop\r\n      ? dataMapper.troop(\r\n          await readRmmzTroopData(pathLib, fsLib, basePath),\r\n          SRC_DATA_TROOP\r\n        )\r\n      : undefined,\r\n    commonEvent: dataMapper.commonEvent\r\n      ? dataMapper.commonEvent(\r\n          await readRmmzCommonEventData(pathLib, fsLib, basePath),\r\n          SRC_DATA_COMMON_EVNET\r\n        )\r\n      : undefined,\r\n  };\r\n};\r\n","import {\r\n  writeRmmzActorData,\r\n  writeRmmzEnemyData,\r\n  writeRmmzArmorData,\r\n  writeRmmzWeaponData,\r\n  writeRmmzClassData,\r\n  writeRmmzItemData,\r\n  writeRmmzSkillData,\r\n  writeRmmzStateData,\r\n} from \"./data\";\r\nimport type { FsLib_WriteFile, PathLib_Resolve } from \"./data/detail/libTypes\";\r\nimport type { DataTable } from \"./data/types\";\r\n\r\nconst ggg = (fm: () => Promise<void>) => {\r\n  try {\r\n    return fm();\r\n  } catch {\r\n    return Promise.resolve();\r\n  }\r\n};\r\n\r\nexport const writeDataFiles = async (\r\n  fsLib: FsLib_WriteFile,\r\n  pathLib: PathLib_Resolve,\r\n  basePath: string,\r\n  data: DataTable\r\n): Promise<void[]> => {\r\n  return Promise.all([\r\n    ggg(() => writeRmmzActorData(pathLib, fsLib, basePath, data.actors)),\r\n    ggg(() => writeRmmzEnemyData(pathLib, fsLib, basePath, data.enemies)),\r\n    ggg(() => writeRmmzArmorData(pathLib, fsLib, basePath, data.armors)),\r\n    ggg(() => writeRmmzWeaponData(pathLib, fsLib, basePath, data.weapons)),\r\n    ggg(() => writeRmmzClassData(pathLib, fsLib, basePath, data.classes)),\r\n    ggg(() => writeRmmzItemData(pathLib, fsLib, basePath, data.items)),\r\n    ggg(() => writeRmmzSkillData(pathLib, fsLib, basePath, data.skills)),\r\n    ggg(() => writeRmmzStateData(pathLib, fsLib, basePath, data.states)),\r\n  ]);\r\n};\r\n","import { FOLDER_AUDIO, FOLDER_IMG } from \"@sigureya/rpgtypes\";\r\nimport type PathLib from \"node:path\";\r\n\r\nexport const ensurePath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  folderName: string,\r\n  subFolderName: string\r\n): string => {\r\n  // basePathを正規化。末尾のセパレータを削除\r\n  const normalizedBasePath = pathLib.normalize(basePath);\r\n\r\n  if (normalizedBasePath.endsWith(`${pathLib.sep}${folderName}`)) {\r\n    // フォルダ名がbasePathに含まれている場合、basePathをそのまま使用\r\n    return pathLib.resolve(normalizedBasePath, subFolderName);\r\n  }\r\n\r\n  if (\r\n    normalizedBasePath.endsWith(\r\n      `${pathLib.sep}${folderName}${pathLib.sep}${subFolderName}`\r\n    )\r\n  ) {\r\n    return normalizedBasePath;\r\n  }\r\n\r\n  // サブフォルダを結合\r\n  return pathLib.resolve(basePath, folderName, subFolderName);\r\n};\r\n\r\nexport const validateFilePath = (filePath: string): boolean => {\r\n  // 相対パスの../と、拡張子の両方を禁止する\r\n  // ./xxは存在しないので巻き添えで禁止\r\n  return !filePath.includes(\".\");\r\n};\r\n\r\nconst buildAssetPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  assetType: string,\r\n  subFolder: string,\r\n  filePath: string,\r\n  extension: string\r\n): string => {\r\n  if (!validateFilePath(filePath)) {\r\n    throw new Error(`Invalid file path: ${filePath}`);\r\n  }\r\n  const dir = ensurePath(pathLib, basePath, assetType, subFolder);\r\n\r\n  return pathLib.join(dir, `${filePath}.${extension}`);\r\n};\r\n\r\nexport const buildImageAssetPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  subFolderName: string,\r\n  filePath: string\r\n) => {\r\n  return buildAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_IMG,\r\n    subFolderName,\r\n    filePath,\r\n    \"png\"\r\n  );\r\n};\r\n\r\nexport const buildAudioAssetPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  subFolderName: string,\r\n  filePath: string\r\n) => {\r\n  return buildAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_AUDIO,\r\n    subFolderName,\r\n    filePath,\r\n    \"ogg\"\r\n  );\r\n};\r\n","import type PathLib from \"node:path\";\r\nimport {\r\n  FOLDER_AUDIO_BGM,\r\n  FOLDER_AUDIO_BGS,\r\n  FOLDER_AUDIO_ME,\r\n  FOLDER_AUDIO_SE,\r\n} from \"@sigureya/rpgtypes\";\r\nimport { buildImageAssetPath } from \"./ensure\";\r\n\r\nexport const buildBgmPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_AUDIO_BGM, filePath);\r\n};\r\n\r\nexport const buildBgsPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_AUDIO_BGS, filePath);\r\n};\r\n\r\nexport const buildMePath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_AUDIO_ME, filePath);\r\n};\r\n\r\nexport const buildSePath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_AUDIO_SE, filePath);\r\n};\r\n","import {\r\n  FOLDER_IMG_FACES,\r\n  FOLDER_IMG_PICTURES,\r\n  FOLDER_IMG_BATTLEBACK1,\r\n  FOLDER_IMG_BATTLEBACK2,\r\n  FOLDER_IMG_CHACTERS,\r\n  FOLDER_IMG_ENEMIES,\r\n  FOLDER_IMG_PARALLACES,\r\n  FOLDER_IMG_SV_ACTORS,\r\n  FOLDER_IMG_SV_ENEMIES,\r\n  FOLDER_IMG_SYSTEM,\r\n  FOLDER_IMG_TILESETS,\r\n  FOLDER_IMG_TITLES1,\r\n  FOLDER_IMG_TITLES2,\r\n} from \"@sigureya/rpgtypes\";\r\nimport type PathLib from \"node:path\";\r\nimport { buildImageAssetPath } from \"./ensure\";\r\n\r\nexport const buildFaceImagesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n) => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_FACES, filePath);\r\n};\r\n\r\nexport const buildPicturesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_PICTURES, filePath);\r\n};\r\n\r\nexport const buildBattleback1Path = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_IMG_BATTLEBACK1,\r\n    filePath\r\n  );\r\n};\r\n\r\nexport const buildBattleback2Path = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_IMG_BATTLEBACK2,\r\n    filePath\r\n  );\r\n};\r\n\r\nexport const buildCharactersImagePath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_CHACTERS, filePath);\r\n};\r\n\r\nexport const buildEnemyImagesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_ENEMIES, filePath);\r\n};\r\n\r\nexport const buildParallacesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_IMG_PARALLACES,\r\n    filePath\r\n  );\r\n};\r\n\r\nexport const buildSideViewActorsPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_SV_ACTORS, filePath);\r\n};\r\n\r\nexport const buildSideVewEnemiesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(\r\n    pathLib,\r\n    basePath,\r\n    FOLDER_IMG_SV_ENEMIES,\r\n    filePath\r\n  );\r\n};\r\n\r\nexport const buildSystemImagePath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_SYSTEM, filePath);\r\n};\r\n\r\nexport const buildTilesetImagesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_TILESETS, filePath);\r\n};\r\n\r\nexport const buildTitle1ImagesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_TITLES1, filePath);\r\n};\r\n\r\nexport const buildTitle2ImagesPath = (\r\n  pathLib: typeof PathLib,\r\n  basePath: string,\r\n  filePath: string\r\n): string => {\r\n  return buildImageAssetPath(pathLib, basePath, FOLDER_IMG_TITLES2, filePath);\r\n};\r\n","import {\r\n  FOLDER_AUDIO_BGM,\r\n  FOLDER_AUDIO_BGS,\r\n  FOLDER_AUDIO_ME,\r\n  FOLDER_AUDIO_SE,\r\n} from \"@sigureya/rpgtypes\";\r\n\r\nexport const AUDIO_FOLDES = [\r\n  FOLDER_AUDIO_BGM,\r\n  FOLDER_AUDIO_BGS,\r\n  FOLDER_AUDIO_ME,\r\n  FOLDER_AUDIO_SE,\r\n] as const satisfies readonly string[];\r\n","import {\r\n  FOLDER_IMG_FACES,\r\n  FOLDER_IMG_PICTURES,\r\n  FOLDER_IMG_BATTLEBACK1,\r\n  FOLDER_IMG_BATTLEBACK2,\r\n  FOLDER_IMG_CHACTERS,\r\n  FOLDER_IMG_ENEMIES,\r\n  FOLDER_IMG_PARALLACES,\r\n  FOLDER_IMG_SV_ACTORS,\r\n  FOLDER_IMG_SV_ENEMIES,\r\n  FOLDER_IMG_SYSTEM,\r\n  FOLDER_IMG_TILESETS,\r\n  FOLDER_IMG_TITLES1,\r\n  FOLDER_IMG_TITLES2,\r\n} from \"@sigureya/rpgtypes\";\r\n\r\nexport const IMAGE_FOLDERS = [\r\n  FOLDER_IMG_FACES,\r\n  FOLDER_IMG_PICTURES,\r\n  FOLDER_IMG_BATTLEBACK1,\r\n  FOLDER_IMG_BATTLEBACK2,\r\n  FOLDER_IMG_CHACTERS,\r\n  FOLDER_IMG_ENEMIES,\r\n  FOLDER_IMG_PARALLACES,\r\n  FOLDER_IMG_SV_ACTORS,\r\n  FOLDER_IMG_SV_ENEMIES,\r\n  FOLDER_IMG_SYSTEM,\r\n  FOLDER_IMG_TILESETS,\r\n  FOLDER_IMG_TITLES1,\r\n  FOLDER_IMG_TITLES2,\r\n] as const satisfies readonly string[]; // これで型がstring[]になる\r\n","import type PathLib from \"node:path\";\r\nimport type FsLib from \"node:fs/promises\";\r\nimport { ensurePath } from \"./ensure\";\r\nimport { FOLDER_DATA, FOLDER_IMG } from \"@sigureya/rpgtypes\";\r\nimport { AUDIO_FOLDES, IMAGE_FOLDERS } from \"./constants\";\r\n\r\nconst makeFolder = (\r\n  pathLib: typeof PathLib,\r\n  fsLib: typeof FsLib,\r\n  basePath: string,\r\n  folderName: string,\r\n  subFolderName: string\r\n): Promise<string | undefined> => {\r\n  const path = ensurePath(pathLib, basePath, folderName, subFolderName);\r\n  return fsLib.mkdir(path, {\r\n    recursive: true,\r\n  });\r\n};\r\n\r\nexport const makeImageFolders = (\r\n  pathLib: typeof PathLib,\r\n  fsLib: typeof FsLib,\r\n  basePath: string\r\n): Promise<string | undefined>[] => {\r\n  return IMAGE_FOLDERS.map((folder) => {\r\n    return makeFolder(pathLib, fsLib, basePath, FOLDER_IMG, folder);\r\n  });\r\n};\r\n\r\nexport const makeAudioFolders = (\r\n  pathLib: typeof PathLib,\r\n  fsLib: typeof FsLib,\r\n  basePath: string\r\n): Promise<string | undefined>[] => {\r\n  return AUDIO_FOLDES.map((folder) => {\r\n    return makeFolder(pathLib, fsLib, basePath, FOLDER_IMG, folder);\r\n  });\r\n};\r\n\r\nexport const makeDataFoldes = (\r\n  pathLib: typeof PathLib,\r\n  fsLib: typeof FsLib,\r\n  basePath: string\r\n): Promise<string | undefined>[] => {\r\n  return [makeFolder(pathLib, fsLib, basePath, FOLDER_DATA, \"\")];\r\n};\r\n","export const isValidAssetPath = (path: string): boolean => {\r\n  // 空文字列は有効\r\n  if (path === \"\") {\r\n    return true;\r\n  }\r\n\r\n  if (path.endsWith(\"/\")) {\r\n    return false;\r\n  }\r\n  if (hasInvalidChars(path)) {\r\n    return false;\r\n  }\r\n  if (testWindowsReserved(path)) {\r\n    return false;\r\n  }\r\n\r\n  // 有効なパス\r\n  return true;\r\n};\r\n\r\nconst invalidWindowsNames: ReadonlyArray<string> = [\r\n  \"con\",\r\n  \"prn\",\r\n  \"aux\",\r\n  \"nul\",\r\n  \"com1\",\r\n  \"com2\",\r\n  \"com3\",\r\n  \"com4\",\r\n  \"com5\",\r\n  \"com6\",\r\n  \"com7\",\r\n  \"com8\",\r\n  \"com9\",\r\n  \"lpt1\",\r\n  \"lpt2\",\r\n  \"lpt3\",\r\n  \"lpt4\",\r\n  \"lpt5\",\r\n  \"lpt6\",\r\n  \"lpt7\",\r\n  \"lpt8\",\r\n  \"lpt9\",\r\n];\r\n\r\nconst hasInvalidChars = (path: string): boolean => {\r\n  return /[.#\\\\]/.test(path);\r\n};\r\n\r\nconst testWindowsReserved = (path: string): boolean => {\r\n  // Windowsの予約ファイル名を防ぐ\r\n  const segments = path.split(\"/\");\r\n  return segments.some((segment) =>\r\n    invalidWindowsNames.includes(segment.toLowerCase())\r\n  );\r\n};\r\n","import type { Dirent } from \"node:fs\";\r\nimport type { FsLib_ReadDir } from \"../data/detail/libTypes\";\r\nimport type PathLib from \"node:path\";\r\nimport { ensurePath } from \"./ensure\";\r\nimport type { AudioFolders, ImageFolders } from \"@sigureya/rpgtypes\";\r\nimport { FOLDER_IMG, FOLDER_AUDIO } from \"@sigureya/rpgtypes\";\r\nimport type { AudioDirent, ImageDirent } from \"./types/assetPath\";\r\n\r\nexport const listupImageFiles = async (\r\n  pathLib: typeof PathLib,\r\n  fsLib: FsLib_ReadDir,\r\n  basePath: string,\r\n  subFolderName: ImageFolders\r\n): Promise<ImageDirent[]> => {\r\n  const dirPath = ensurePath(pathLib, basePath, FOLDER_IMG, subFolderName);\r\n  const dirents = await fsLib.readdir(dirPath, { withFileTypes: true });\r\n  return dirents.filter(isImageDirent);\r\n};\r\n\r\nconst areExtention = <D extends { name: string }, Ext extends `.${string}`>(\r\n  dirent: D,\r\n  ext: Ext\r\n): dirent is D & { name: `${string}${Ext}` } => {\r\n  return dirent.name.endsWith(ext);\r\n};\r\n\r\nexport const isAudioFileExtension = <D extends { name: string }>(dirent: D) => {\r\n  return areExtention(dirent, \".ogg\") || areExtention(dirent, \".m4a\");\r\n};\r\n\r\nexport const isImageFileExtension = <D extends { name: string }>(dirent: D) => {\r\n  return areExtention(dirent, \".png\");\r\n};\r\n\r\nexport const isImageDirent = (dirent: Dirent): dirent is ImageDirent => {\r\n  return dirent.isFile() && isImageFileExtension(dirent);\r\n};\r\n\r\nexport const isAudioDirent = (dirent: Dirent): dirent is AudioDirent => {\r\n  return dirent.isFile() && isAudioFileExtension(dirent);\r\n};\r\n\r\nexport const listupAudioFiles = async (\r\n  pathLib: typeof PathLib,\r\n  fsLib: FsLib_ReadDir,\r\n  basePath: string,\r\n  subFolderName: AudioFolders\r\n): Promise<AudioDirent[]> => {\r\n  const dirPath = ensurePath(pathLib, basePath, FOLDER_AUDIO, subFolderName);\r\n  const dirents = await fsLib.readdir(dirPath, { withFileTypes: true });\r\n  return dirents.filter(isAudioDirent);\r\n};\r\n"],"names":["denormalizeIdentifiedItems","items","ensureDataPath","pathLib","basePath","fileName","FOLDER_DATA","validateAndFilterItems","list","fn","item","writeDataFile","fsLib","path","data","space","readRmmzDataListFile","resolvedPath","validateFn","jsonText","obj","ensureActorDataPath","FILENAME_ACTORS","writeRmmzActorData","actors","readRmmzActorData","isDataActor","ensureArmorDataPath","FILENAME_ARMORS","writeRmmzArmorData","armors","readRmmzArmorData","isDataArmor","ensureClassDataPath","FILENAME_CLASSES","writeRmmzClassData","readRmmzClassData","isDataClass","ensureEnemyDataPath","FILENAME_ENEMIES","writeRmmzEnemyData","enemies","readRmmzEnemyData","isDataEnemy","ensureItemDataPath","FILENAME_ITEMS","writeRmmzItemData","readRmmzItemData","isDataItem","ensureSkillDataPath","FILENAME_SKILLS","writeRmmzSkillData","skills","readRmmzSkillData","isDataSkill","ensureStateDataPath","FILENAME_STATES","writeRmmzStateData","states","readRmmzStateData","isDataState","ensureWeaponDataPath","FILENAME_WEAPONS","writeRmmzWeaponData","weapons","readRmmzWeaponData","isDataWeapon","isDataTroop","ensureTroopDataPath","FILENAME_TROOPS","writeRmmzTroopData","troops","readRmmzTroopData","isCommonEvent","ensureCommonEventDataPath","FILENAME_COMMON_EVENTS","writeRmmzCommonEventData","commonEvents","readRmmzCommonEventData","ensureMapInfoDataPath","FILENAME_MAP_INFOS","writeRmmzMapInfoData","mapInfos","readRmmzMapInfoData","isDataMapInfo","isMapFileName","filename","listupMapFiles","dirent","makeMapFileName","mapId","resolveMapFilePath","validateAndNormalizeMapData","makeMapData","readMapFileFromInfo","info","filePath","text","mapData","mappingAllMapFiles","infos","mapFileInfo","dispatchHandlers","dataMapper","SRC_DATA_ACTOR","SRC_DATA_ARMOR","SRC_DATA_ENEMY","SRC_DATA_CLASS","SRC_DATA_ITEMS","SRC_DATA_SKILL","SRC_DATA_STATE","SRC_DATA_WEAPON","SRC_DATA_TROOP","SRC_DATA_COMMON_EVNET","ggg","fm","writeDataFiles","ensurePath","folderName","subFolderName","normalizedBasePath","validateFilePath","buildAssetPath","assetType","subFolder","extension","dir","buildImageAssetPath","FOLDER_IMG","buildBgmPath","FOLDER_AUDIO_BGM","buildBgsPath","FOLDER_AUDIO_BGS","buildMePath","FOLDER_AUDIO_ME","buildSePath","FOLDER_AUDIO_SE","buildFaceImagesPath","FOLDER_IMG_FACES","buildPicturesPath","FOLDER_IMG_PICTURES","buildBattleback1Path","FOLDER_IMG_BATTLEBACK1","buildBattleback2Path","FOLDER_IMG_BATTLEBACK2","buildCharactersImagePath","FOLDER_IMG_CHACTERS","buildEnemyImagesPath","FOLDER_IMG_ENEMIES","buildParallacesPath","FOLDER_IMG_PARALLACES","buildSideViewActorsPath","FOLDER_IMG_SV_ACTORS","buildSideVewEnemiesPath","FOLDER_IMG_SV_ENEMIES","buildSystemImagePath","FOLDER_IMG_SYSTEM","buildTilesetImagesPath","FOLDER_IMG_TILESETS","buildTitle1ImagesPath","FOLDER_IMG_TITLES1","buildTitle2ImagesPath","FOLDER_IMG_TITLES2","AUDIO_FOLDES","IMAGE_FOLDERS","makeFolder","makeImageFolders","folder","makeAudioFolders","makeDataFoldes","isValidAssetPath","hasInvalidChars","testWindowsReserved","invalidWindowsNames","segment","listupImageFiles","dirPath","isImageDirent","areExtention","ext","isAudioFileExtension","isImageFileExtension","isAudioDirent","listupAudioFiles","FOLDER_AUDIO"],"mappings":"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"}